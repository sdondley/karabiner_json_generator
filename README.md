# Karabiner JSON Rule Generator with Complex Modifiers™️

## About
This repository contains the Karabiner JSON Generator, a crude, unfinished tool
for generating JSON configurations for use with Karabiner-Elements (K-E). It's
mostly here to showcase the Complex Modifiers™️  Ruleset I developed and will
expand on as time permits.

The primary goal here is to make it convenient for you to add a new set of
modifiers to you configuration quickly and easily. You just download and install
the Complex Modifiers™️  into your K-E configuration. Secondarily, If you want,
feel free to use the json_generator.pl script to generate triggers for
activating desired events using the complex modifiers.

### What's Inside
* This README file
* A basic Perl script, json_generator.pl, for converting your yaml file and json
  templates into K-E json files that you can then import into K-E.
* A hand-crafted complex_modifiers.json containing "Complex Modifiers"™️ . This
  file is ready and waiting for you to import it into K-E. See below for more
  details.
* A sample YAML file. You'll want to change this to suit your needs.
* An app_activators.json sample file generated by the json_generator.pl script,
  which you will also not want to use directly.

## Big Picture Overview

### Complex Modifiers™️  Ruleset: What is it?
Not to be confused with complex *modifications*, the Complex Modifier™️  Ruleset
is just a set of key combination defintions designed to make it a no-brainer for
you to add modifiers to your existing K-E configuration. 

The current ruleset version consists of six complex modifiers:

- **Double Tap Right Shift**: This complex modifier gets activated when the
  right shift key is double-tapped. You then have to press a trigger key before
  the timeout setting to trigger an action.
- **Double Tap Left Shift**: Same as double tapping right shift key
- **LR-Shift**: This involves holding down the left shift and then pressing the
  right shift key. K-E then wait indefinitely for you to hit a trigger key. If
  you change your mind and you don't want to trigger anything, you can clear the
  state by doing left-right shift again. 
- **RL-Shift**: Same as LR-Shift but with the right shift key held down and the
  left shift key pressed.
- **LR-Shift Long Press**: Like LR-Shift but with a long press on the right
  shift key. A notification will pop up to let you know that the long press has
  registered.
- **RL-Shift Long Press**: Same as LR-Shift but with the right shift key held
  down and the left shift key long pressed.

### Trigger Keys Ruleset
The trigger keys involve specific keys that execute actions when used with complex modifiers. These keys trigger the predefined functionalities according to the complex modifiers' conditions. The trigger key rules are also deteremined by what you put in the yaml file. 

You can associated triggers with any complex modifier using the yaml file. Look
at the example yaml file to see how this is done.

## Getting It all Working

The steps below assume your know a little bit about adding rulesets to K-E
so doesn't go into great deail on where to click.
If you are unclear, consult the K-E documentation at: 
https://karabiner-elements.pqrs.org/docs/getting-started/configuration/.

### Activation of Complex Modifiers™️  Rulesets
To use these rulesets:
1. Drop the complex_modifiers.json file into the Karabiner-Elements
   configuration directory, usually found at
   `/.config/karabiner/assets/complex_modifiers.json`.
2. Go to the 'Complex Modifications' tab in Karabiner-Elements.
3. Add in the complex modifiers you wish to use with your triggers.

### Generating JSON Files
To generate JSON files:
1. Configure the yaml file. Use the supplied example file as reference.
2. To generate a new JSON configuration, simply run the script. Currently, there are no options or arguments to pass to the script.
 
   ```bash
   perl generate_json.pl
   
3. If your cross your fingers just right, your generated json file should appear
   in the same directory as the perl script. Currently, if there is an error,
   the script will silently die as if nothing is wrong. Sorry!
4. Now copy over the generated json file into the K-E config directory and
   enable the rulesets for your triggers. 

## Bugs, Suggestions, Questions?
Drop a message in the issue queue. I'll do my best to address your input.

Once this is refined and tested more, I'll drop the Complex Modifiers™️  into the public K-E
json repo.